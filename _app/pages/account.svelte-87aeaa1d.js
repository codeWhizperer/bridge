import{S as ee,i as te,s as se,e as D,c as P,a as y,d as u,b as T,f as g,r as X,u as B,w as Z,x as N,I as _e,t as H,g as S,h as J,G as M,k as F,n as I,E as w,U as de,V as me,j as O,m as V,o as z,v as Y,H as be,A as ke,K as we,l as ae,D as oe,F as ve,W as ge,X as $e,Y as Ee,Z as Q}from"../chunks/vendor-1ba65e99.js";import{B as Te,C as De,i as Pe,n as ye,w as We,G as Ae,g as Ce,f as Ne,a as He,b as Se,d as Re,m as Be}from"../chunks/wallet-f2c2b404.js";import{t as ne,s as x}from"../chunks/format-5bbb3112.js";import{g as le,u as ce}from"../chunks/storage-fd4f4906.js";import{M as je}from"../chunks/Modal-80715286.js";import"../chunks/singletons-12a22614.js";function ie(n,e,t){const s=n.slice();return s[7]=e[t],s}function Fe(n){let e,t;return{c(){e=H("No recent "),t=H(n[1])},l(s){e=S(s,"No recent "),t=S(s,n[1])},m(s,l){g(s,e,l),g(s,t,l)},p(s,l){l&2&&J(t,s[1])},i:M,o:M,d(s){s&&u(e),s&&u(t)}}}function Ie(n){let e,t,s,l,a,r,o,c,i,h,f,d,b,R,p,$,j,E=n[0],v=[];for(let k=0;k<E.length;k+=1)v[k]=fe(ie(n,E,k));const A=k=>B(v[k],1,1,()=>{v[k]=null});return{c(){e=D("table"),t=D("thead"),s=D("tr"),l=D("th"),a=H("Token"),r=F(),o=D("th"),c=H("Date"),i=F(),h=D("th"),f=H("Hash"),d=F(),b=D("th"),R=H("Status"),p=F(),$=D("tbody");for(let k=0;k<v.length;k+=1)v[k].c();this.h()},l(k){e=P(k,"TABLE",{class:!0});var m=y(e);t=P(m,"THEAD",{});var _=y(t);s=P(_,"TR",{class:!0});var W=y(s);l=P(W,"TH",{class:!0});var C=y(l);a=S(C,"Token"),C.forEach(u),r=I(W),o=P(W,"TH",{class:!0});var L=y(o);c=S(L,"Date"),L.forEach(u),i=I(W),h=P(W,"TH",{class:!0});var K=y(h);f=S(K,"Hash"),K.forEach(u),d=I(W),b=P(W,"TH",{class:!0});var G=y(b);R=S(G,"Status"),G.forEach(u),W.forEach(u),_.forEach(u),p=I(m),$=P(m,"TBODY",{});var U=y($);for(let q=0;q<v.length;q+=1)v[q].l(U);U.forEach(u),m.forEach(u),this.h()},h(){T(l,"class","svelte-1sfdbx1"),T(o,"class","svelte-1sfdbx1"),T(h,"class","svelte-1sfdbx1"),T(b,"class","svelte-1sfdbx1"),T(s,"class","svelte-1sfdbx1"),T(e,"class","svelte-1sfdbx1")},m(k,m){g(k,e,m),w(e,t),w(t,s),w(s,l),w(l,a),w(s,r),w(s,o),w(o,c),w(s,i),w(s,h),w(h,f),w(s,d),w(s,b),w(b,R),w(e,p),w(e,$);for(let _=0;_<v.length;_+=1)v[_].m($,null);j=!0},p(k,m){if(m&31){E=k[0];let _;for(_=0;_<E.length;_+=1){const W=ie(k,E,_);v[_]?(v[_].p(W,m),N(v[_],1)):(v[_]=fe(W),v[_].c(),N(v[_],1),v[_].m($,null))}for(X(),_=E.length;_<v.length;_+=1)A(_);Z()}},i(k){if(!j){for(let m=0;m<E.length;m+=1)N(v[m]);j=!0}},o(k){v=v.filter(Boolean);for(let m=0;m<v.length;m+=1)B(v[m]);j=!1},d(k){k&&u(e),de(v,k)}}}function Le(n){let e,t=x(n[7].hash,4,3)+"",s;return{c(){e=D("td"),s=H(t),this.h()},l(l){e=P(l,"TD",{class:!0});var a=y(e);s=S(a,t),a.forEach(u),this.h()},h(){T(e,"class","svelte-1sfdbx1")},m(l,a){g(l,e,a),w(e,s)},p(l,a){a&1&&t!==(t=x(l[7].hash,4,3)+"")&&J(s,t)},d(l){l&&u(e)}}}function Me(n){let e,t,s=x(n[7].hash,4,3)+"",l,a;return{c(){e=D("td"),t=D("a"),l=H(s),this.h()},l(r){e=P(r,"TD",{class:!0});var o=y(e);t=P(o,"A",{href:!0,target:!0});var c=y(t);l=S(c,s),c.forEach(u),o.forEach(u),this.h()},h(){T(t,"href",a=""+(n[2]+"/tx/"+n[7].hash)),T(t,"target","_blank"),T(e,"class","svelte-1sfdbx1")},m(r,o){g(r,e,o),w(e,t),w(t,l)},p(r,o){o&1&&s!==(s=x(r[7].hash,4,3)+"")&&J(l,s),o&5&&a!==(a=""+(r[2]+"/tx/"+r[7].hash))&&T(t,"href",a)},d(r){r&&u(e)}}}function Ge(n){let e,t=n[7].status+"",s;return{c(){e=D("td"),s=H(t),this.h()},l(l){e=P(l,"TD",{class:!0});var a=y(e);s=S(a,t),a.forEach(u),this.h()},h(){T(e,"class","svelte-1sfdbx1")},m(l,a){g(l,e,a),w(e,s)},p(l,a){a&1&&t!==(t=l[7].status+"")&&J(s,t)},i:M,o:M,d(l){l&&u(e)}}}function Ue(n){let e,t,s;return t=new Te({props:{height:"32px",$$slots:{default:[qe]},$$scope:{ctx:n}}}),t.$on("click",function(){me(n[4](n[7]))&&n[4](n[7]).apply(this,arguments)}),{c(){e=D("td"),O(t.$$.fragment),this.h()},l(l){e=P(l,"TD",{class:!0});var a=y(e);V(t.$$.fragment,a),a.forEach(u),this.h()},h(){T(e,"class","svelte-1sfdbx1")},m(l,a){g(l,e,a),z(t,e,null),s=!0},p(l,a){n=l;const r={};a&1024&&(r.$$scope={dirty:a,ctx:n}),t.$set(r)},i(l){s||(N(t.$$.fragment,l),s=!0)},o(l){B(t.$$.fragment,l),s=!1},d(l){l&&u(e),Y(t)}}}function qe(n){let e;return{c(){e=H("Claimable")},l(t){e=S(t,"Claimable")},m(t,s){g(t,e,s)},d(t){t&&u(e)}}}function fe(n){let e,t,s=n[7].token+"",l,a,r,o=ne(n[7].timestamp)+"",c,i,h,f,d,b,R,p;function $(m,_){return m[2]?Me:Le}let j=$(n),E=j(n);const v=[Ue,Ge],A=[];function k(m,_){return(f==null||_&3)&&(f=!!(m[1]=="withdrawals"&&m[7].status=="in progress"&&m[3](m[7]))),f?0:1}return d=k(n,-1),b=A[d]=v[d](n),{c(){e=D("tr"),t=D("td"),l=H(s),a=F(),r=D("td"),c=H(o),i=F(),E.c(),h=F(),b.c(),R=F(),this.h()},l(m){e=P(m,"TR",{class:!0});var _=y(e);t=P(_,"TD",{class:!0});var W=y(t);l=S(W,s),W.forEach(u),a=I(_),r=P(_,"TD",{class:!0});var C=y(r);c=S(C,o),C.forEach(u),i=I(_),E.l(_),h=I(_),b.l(_),R=I(_),_.forEach(u),this.h()},h(){T(t,"class","svelte-1sfdbx1"),T(r,"class","svelte-1sfdbx1"),T(e,"class","svelte-1sfdbx1")},m(m,_){g(m,e,_),w(e,t),w(t,l),w(e,a),w(e,r),w(r,c),w(e,i),E.m(e,null),w(e,h),A[d].m(e,null),w(e,R),p=!0},p(m,_){(!p||_&1)&&s!==(s=m[7].token+"")&&J(l,s),(!p||_&1)&&o!==(o=ne(m[7].timestamp)+"")&&J(c,o),j===(j=$(m))&&E?E.p(m,_):(E.d(1),E=j(m),E&&(E.c(),E.m(e,h)));let W=d;d=k(m,_),d===W?A[d].p(m,_):(X(),B(A[W],1,1,()=>{A[W]=null}),Z(),b=A[d],b?b.p(m,_):(b=A[d]=v[d](m),b.c()),N(b,1),b.m(e,R))},i(m){p||(N(b),p=!0)},o(m){B(b),p=!1},d(m){m&&u(e),E.d(),A[d].d()}}}function Oe(n){let e,t,s,l;const a=[Ie,Fe],r=[];function o(c,i){return c[0].length!=0?0:1}return t=o(n),s=r[t]=a[t](n),{c(){e=D("div"),s.c(),this.h()},l(c){e=P(c,"DIV",{class:!0});var i=y(e);s.l(i),i.forEach(u),this.h()},h(){T(e,"class","container svelte-1sfdbx1")},m(c,i){g(c,e,i),r[t].m(e,null),l=!0},p(c,[i]){let h=t;t=o(c),t===h?r[t].p(c,i):(X(),B(r[h],1,1,()=>{r[h]=null}),Z(),s=r[t],s?s.p(c,i):(s=r[t]=a[t](c),s.c()),N(s,1),s.m(e,null))},i(c){l||(N(s),l=!0)},o(c){B(s),l=!1},d(c){c&&u(e),r[t].d()}}}function Ve(n,e,t){let{transactions:s=[]}=e,{transactionType:l="transaction"}=e,{fraudProofWindow:a=0}=e,{blockExplorer:r}=e;const o=_e(),c=h=>{const f=h.timestamp+a;return Date.now()/1e3>f},i=async h=>{o("claimFunds",{transaction:h})};return n.$$set=h=>{"transactions"in h&&t(0,s=h.transactions),"transactionType"in h&&t(1,l=h.transactionType),"fraudProofWindow"in h&&t(5,a=h.fraudProofWindow),"blockExplorer"in h&&t(2,r=h.blockExplorer)},[s,l,r,c,i,a]}class ue extends ee{constructor(e){super();te(this,e,Ve,Oe,se,{transactions:0,transactionType:1,fraudProofWindow:5,blockExplorer:2})}}var ze="/_app/assets/small-arrow-left-42ec6c81.png",Ye="/_app/assets/small-arrow-left-dark-5ef198d4.png";function he(n){let e,t;return e=new je({props:{footer:!1,$$slots:{default:[Je]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,l){z(e,s,l),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Je(n){let e,t,s,l,a,r,o,c;return{c(){e=D("strong"),t=H("Withdrawal in progress..."),s=F(),l=D("p"),a=H("Processing the transaction can take a couple of minutes."),r=F(),o=D("p"),c=H("A couple of messages will show up in the top corner to keep you informed on the progress."),this.h()},l(i){e=P(i,"STRONG",{});var h=y(e);t=S(h,"Withdrawal in progress..."),h.forEach(u),s=I(i),l=P(i,"P",{class:!0});var f=y(l);a=S(f,"Processing the transaction can take a couple of minutes."),f.forEach(u),r=I(i),o=P(i,"P",{class:!0});var d=y(o);c=S(d,"A couple of messages will show up in the top corner to keep you informed on the progress."),d.forEach(u),this.h()},h(){T(l,"class","svelte-1uvuf11"),T(o,"class","svelte-1uvuf11")},m(i,h){g(i,e,h),w(e,t),g(i,s,h),g(i,l,h),w(l,a),g(i,r,h),g(i,o,h),w(o,c)},d(i){i&&u(e),i&&u(s),i&&u(l),i&&u(r),i&&u(o)}}}function Ke(n){let e;return{c(){e=H("Account History")},l(t){e=S(t,"Account History")},m(t,s){g(t,e,s)},d(t){t&&u(e)}}}function Xe(n){let e,t;return{c(){e=D("p"),t=H("Please connect a wallet."),this.h()},l(s){e=P(s,"P",{class:!0});var l=y(e);t=S(l,"Please connect a wallet."),l.forEach(u),this.h()},h(){T(e,"class","center svelte-1uvuf11")},m(s,l){g(s,e,l),w(e,t)},p:M,i:M,o:M,d(s){s&&u(e)}}}function Ze(n){let e,t,s,l,a,r,o,c,i,h;return l=new ue({props:{blockExplorer:n[4],transactions:n[5],transactionType:"withdrawals",fraudProofWindow:n[2]}}),l.$on("claimFunds",n[9]),i=new ue({props:{blockExplorer:n[3],transactions:n[6],transactionType:"deposits"}}),{c(){e=D("p"),t=H("Recent Withdrawals"),s=F(),O(l.$$.fragment),a=F(),r=D("p"),o=H("Recent Deposits"),c=F(),O(i.$$.fragment),this.h()},l(f){e=P(f,"P",{class:!0});var d=y(e);t=S(d,"Recent Withdrawals"),d.forEach(u),s=I(f),V(l.$$.fragment,f),a=I(f),r=P(f,"P",{class:!0});var b=y(r);o=S(b,"Recent Deposits"),b.forEach(u),c=I(f),V(i.$$.fragment,f),this.h()},h(){T(e,"class","svelte-1uvuf11"),T(r,"class","svelte-1uvuf11")},m(f,d){g(f,e,d),w(e,t),g(f,s,d),z(l,f,d),g(f,a,d),g(f,r,d),w(r,o),g(f,c,d),z(i,f,d),h=!0},p(f,d){const b={};d&16&&(b.blockExplorer=f[4]),d&32&&(b.transactions=f[5]),d&4&&(b.fraudProofWindow=f[2]),l.$set(b);const R={};d&8&&(R.blockExplorer=f[3]),d&64&&(R.transactions=f[6]),i.$set(R)},i(f){h||(N(l.$$.fragment,f),N(i.$$.fragment,f),h=!0)},o(f){B(l.$$.fragment,f),B(i.$$.fragment,f),h=!1},d(f){f&&u(e),f&&u(s),Y(l,f),f&&u(a),f&&u(r),f&&u(c),Y(i,f)}}}function Qe(n){let e,t,s,l,a,r,o,c,i,h,f;l=new Ae({props:{marginTop:"0",$$slots:{default:[Ke]},$$scope:{ctx:n}}});const d=[Ze,Xe],b=[];function R(p,$){return p[0]?0:1}return r=R(n),o=b[r]=d[r](n),{c(){e=D("img"),s=F(),O(l.$$.fragment),a=F(),o.c(),c=ae(),this.h()},l(p){e=P(p,"IMG",{src:!0,alt:!0,class:!0}),s=I(p),V(l.$$.fragment,p),a=I(p),o.l(p),c=ae(),this.h()},h(){oe(e.src,t=n[7])||T(e,"src",t),T(e,"alt","Arrow pointing left. Navigate back button."),T(e,"class","svelte-1uvuf11")},m(p,$){g(p,e,$),g(p,s,$),z(l,p,$),g(p,a,$),b[r].m(p,$),g(p,c,$),i=!0,h||(f=ve(e,"click",n[8]),h=!0)},p(p,$){(!i||$&128&&!oe(e.src,t=p[7]))&&T(e,"src",t);const j={};$&4194304&&(j.$$scope={dirty:$,ctx:p}),l.$set(j);let E=r;r=R(p),r===E?b[r].p(p,$):(X(),B(b[E],1,1,()=>{b[E]=null}),Z(),o=b[r],o?o.p(p,$):(o=b[r]=d[r](p),o.c()),N(o,1),o.m(c.parentNode,c))},i(p){i||(N(l.$$.fragment,p),N(o),i=!0)},o(p){B(l.$$.fragment,p),B(o),i=!1},d(p){p&&u(e),p&&u(s),Y(l,p),p&&u(a),b[r].d(p),p&&u(c),h=!1,f()}}}function xe(n){let e,t,s,l,a=n[1]&&he(n);return s=new De({props:{$$slots:{default:[Qe]},$$scope:{ctx:n}}}),{c(){a&&a.c(),e=F(),t=D("div"),O(s.$$.fragment),this.h()},l(r){a&&a.l(r),e=I(r),t=P(r,"DIV",{class:!0});var o=y(t);V(s.$$.fragment,o),o.forEach(u),this.h()},h(){T(t,"class","container svelte-1uvuf11")},m(r,o){a&&a.m(r,o),g(r,e,o),g(r,t,o),z(s,t,null),l=!0},p(r,[o]){r[1]?a?o&2&&N(a,1):(a=he(r),a.c(),N(a,1),a.m(e.parentNode,e)):a&&(X(),B(a,1,1,()=>{a=null}),Z());const c={};o&4194557&&(c.$$scope={dirty:o,ctx:r}),s.$set(c)},i(r){l||(N(a),N(s.$$.fragment,r),l=!0)},o(r){B(a),B(s.$$.fragment,r),l=!1},d(r){a&&a.d(r),r&&u(e),r&&u(t),Y(s)}}}function et(n,e,t){let s,l;be(n,Be,C=>t(10,l=C));let a=!1,r=!1,o,c,i,h,f,d,b,R,p,$,j,E;const v=()=>{Ce("/bridge")};let A=[],k=[];const m=async()=>{if(c&&o){const C=await Ne(o);C.isSupported&&C.L2?await He(C.companionChainId):C.isSupported&&!C.L2&&(t(6,{deposits:k,withdrawals:A}=le(o,c[0]),k,t(5,A)),t(2,i=Se(o)),p=await Re(o),h=new ge(window.ethereum),f=new $e(p.rpcUrls[0]),R=C,t(3,d=C.blockExplorerUrls[0]),t(4,b=p.blockExplorerUrls[0]))}},_=()=>{j&&j(),E&&E(),$&&$()};ke(()=>{$=Pe.subscribe(C=>{_(),t(0,a=C),a?(j=ye.subscribe(async L=>{o=L,await m()}),E=We.subscribe(async L=>{c=L,await m()})):(t(5,A=[]),t(6,k=[]))})}),we(()=>{_()});const W=async C=>{const{hash:L,timestamp:K,token:G}=C.detail.transaction;t(1,r=!0);let U;const[q,...lt]=await Ee.finalizeWithdrawal(L,R.crossDomainMessenger,h,f,h.getSigner(),5,0,pe=>{U=pe});let re;U||q.success==0?(Q.push(`<strong>Withdrawing ${G}...</strong>
                <p>Please wait until the withdrawal is finalized. A new message will appear.</p>
                <p>Click <a href="${d}/tx/${U.hash}" target="_blank">here</a> for more details.</p>`),re=await U.wait(3),ce(o,c[0],G,{hash:L,timestamp:K},"complete","withdrawals"),t(6,{deposits:k,withdrawals:A}=le(o,c[0]),k,t(5,A)),Q.push(`<strong>Withdrawal of ${G} complete.</strong>
                <p>Click <a href="${d}/tx/${re.transactionHash}" target="_blank">here</a> for more details.</p>`)):q.success==1?(Q.push("<strong>Withdrawal was already sent</strong>"),ce(o,c[0],G,{hash:L,timestamp:K},"complete","withdrawals"),t(6,{deposits:k,withdrawals:A}=le(o,c[0]),k,t(5,A))):q.success==2?Q.push("<strong>Withdrawal failed.</strong>"):Q.push("<strong>Withdrawal request not sent.</strong>"),t(1,r=!1)};return n.$$.update=()=>{n.$$.dirty&1024&&t(7,s=l==="dark"?Ye:ze)},[a,r,i,d,b,A,k,s,v,W,l]}class tt extends ee{constructor(e){super();te(this,e,et,xe,se,{})}}function st(n){let e,t;return e=new tt({}),{c(){O(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,l){z(e,s,l),t=!0},p:M,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}class ft extends ee{constructor(e){super();te(this,e,null,st,se,{})}}export{ft as default};
